<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>APA</title>
    <!-- Folha de estilo Leaflet -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet/dist/leaflet.css"
    />
    <!-- Estilos personalizados -->
    <style>
      body {
        font-family: "Helvetica Neue", Arial, sans-serif;
        margin: 20px;
        line-height: 1.7;
        color: #444;
        background-color: #f9f9f9;
      }

      h1,
      h2 {
        color: #333;
        margin-bottom: 15px;
        font-weight: 500;
      }

      h1 {
        font-size: 2.5em;
      }

      h2 {
        font-size: 1.8em;
      }

      p {
        margin-bottom: 20px;
        font-size: 1.1em;
      }

      a {
        color: #007bff;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      /* Estilos do mapa */
      #map {
        height: 500px;
        width: 100%;
        border: 1px solid #ccc;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        border-radius: 8px;
      }

      #error-message {
        color: #dc3545;
        padding: 10px;
        background-color: #f8d7da;
        border: 1px solid #f5c6cb;
        margin-bottom: 10px;
        border-radius: 4px;
        display: none;
      }

      /* Estilos do contêiner do gráfico */
      #plot-container {
        width: 100%;
        margin: 30px auto;
        border: 1px solid #ccc;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        border-radius: 8px;
        overflow: hidden;
      }

      #plot-iframe {
        width: 100%;
        height: 600px;
        border: none;
      }

      /* Estilos da imagem */
      img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 30px auto;
        border: 1px solid #ccc;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        border-radius: 8px;
      }

      /* Adicione algum espaçamento e estilo às tags br */
      br {
        content: "";
        margin: 0.5em 0;
        display: block;
      }
    </style>
  </head>
  <body>
    <!-- Título principal -->
    <h1>
      Parque Estadual Fonte Grande - relatório produzido em 24 de março de 2025
    </h1>

    <!-- Parágrafo introdutório -->
    <p>
      O Parque Estadual da Fonte Grande é uma unidade de conservação brasileira
      criada em 7 de agosto de 1986 no município de Vitória, Espírito Santo. Com
      uma área de 260 hectares, abrange os morros da Fonte Grande, Mulundú, Santa
      Clara, Pedra do Vigia, Bastos e Pedra dos Olhos.
    </p>

    <!-- Seção de Características Gerais -->
    <h2>Características gerais</h2>
    <p>
      O parque é a última área contígua de grande porte com vegetação
      característica de encostas da Mata Atlântica. A topografia é acidentada, com
      relevo ondulado, incluindo vales e pontões.
    </p>
    <p>
      Imagem mais recente disponível (sem nuvem) -
      <strong>10 de março de 2025</strong>. Abaixo está a composição em cor real
      da área do parque. Cada pixel representa 10m x 10m.
      <br />
      A imagem foi capturada pelo satélite Sentinel-2.
    </p>
    <!-- Imagem da composição em cor real -->
    <img
      src="rgb.png"
      alt="Composição em cor real do Parque Estadual Fonte Grande"
    />

    <!-- Seção do Índice NDVI -->
    <p>
      Abaixo está o índice NDVI (Índice de Vegetação por Diferença Normalizada) da
      mesma imagem. O NDVI aproveita as diferenças na forma como as plantas
      refletem a luz.
      <br />
      A vegetação saudável contém muita clorofila, que absorve intensamente a luz
      vermelha visível para a fotossíntese, ao mesmo tempo em que reflete grande
      parte da radiação infravermelha próxima (NIR).
      <br />
      Superfícies como solo e água refletem luz vermelha e NIR de maneira mais
      uniforme.
      <br />
      O NDVI varia de 0 a 1; valores próximos de 1 indicam vegetação densa e
      saudável, enquanto valores próximos de 0 sugerem pouca ou nenhuma vegetação.
    </p>
    <!-- Imagem do mapa NDVI -->
    <img
      src="ndvi.png"
      alt="Mapa de NDVI do Parque Estadual Fonte Grande"
    />

    <!-- Seção do Índice EVI -->
    <p>
      Abaixo está o índice EVI (Índice de Vegetação Aprimorado) da mesma imagem.
      O EVI é uma alternativa ao NDVI, projetada para melhorar a sensibilidade em
      áreas de vegetação densa e reduzir os efeitos da atmosfera e do solo.
      <br />
      Ele utiliza bandas adicionais, como o azul, para corrigir distorções causadas
      por partículas na atmosfera e pela refletância do solo.
      <br />
      O EVI é particularmente útil em regiões tropicais, onde a vegetação é
      exuberante e o NDVI pode saturar, fornecendo uma visão mais detalhada da
      saúde da vegetação.
    </p>
    <!-- Imagem do mapa EVI -->
    <img
      src="evi.png"
      alt="Mapa de EVI do Parque Estadual Fonte Grande"
    />

    <!-- Seção de Análise Temporal -->
    <h2>Análise temporal do indice médio de todo o parque.</h2>

    <p>
      O gráfico apresenta a média do NDVI (Índice de Vegetação por Diferença
      Normalizada) da área nos últimos três anos, juntamente com a precipitação
      mensal em barras.
      <br />
      A análise revela uma clara sazonalidade no NDVI, com picos coincidindo ou
      seguindo de perto os períodos de maior precipitação.
      <br />
      Essa relação sugere uma forte dependência da vegetação à disponibilidade de
      água, onde a alta precipitação impulsiona o crescimento vegetal e,
      consequentemente, eleva o NDVI.
      <br />
      Em contraste, a diminuição da precipitação está associada a um NDVI mais
      baixo, indicando possível estresse hídrico na vegetação.
      <br />
      A observação da sazonalidade é importante para entender a dinâmica
      ecossistêmica da área.
    </p>
    <!-- Contêiner do gráfico -->
    <div id="plot-container">
      <iframe id="plot-iframe" src="plot.html"></iframe>
    </div>

    <!-- Seção do Mapa -->
    <h2>Mapa</h2>
    <div id="error-message"></div>
    <div id="map"></div>

    <!-- Script Leaflet -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
      // Inicialização do mapa
      const map = L.map("map").setView([-20.304598, -40.339163], 16);

      // Adição da camada de mapa OpenStreetMap
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution:
          "© OpenStreetMap contributors - " + new Date().getFullYear(),
        maxZoom: 19,
      }).addTo(map);

      // Função para adicionar estilo ao GeoJSON
      function style(feature) {
        return {
          fillColor: "green", // Cor de preenchimento verde
          weight: 2, // Largura da linha
          opacity: 1, // Opacidade da linha
          color: "white", // Cor da linha branca
          fillOpacity: 0.5, // Opacidade do preenchimento
        };
      }

      // Fetch GeoJSON data
      fetch("parque.geojson")
        .then((response) => response.json())
        .then((data) => {
          // Add GeoJSON layer to the map with style
          L.geoJSON(data, {
            style: style,
          }).addTo(map);
        })
        .catch((error) =>
          console.error("Erro ao carregar GeoJSON:", error)
        );
    </script>
  </body>
</html>
